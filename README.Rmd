---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# opuy

*Nicolás Schmidt, Daniela Vairo*

<!-- badges: start -->
[![Project Status: Active – The project has reached a stable, usable
state and is being actively
developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![Travis build status](https://travis-ci.com/Nicolas-Schmidt/opuy.svg?branch=master)](https://travis-ci.com/Nicolas-Schmidt/opuy)
<!-- badges: end -->


> Datos de opinón pública de Uruguay 1989 - 2020. 

### Descripción 

Provee un conjunto de datos de opinión publica en Uruguay en el periodo que va desde 1989 hasta 2020. Asimismo, también se pueden obtener resúmenes agregados por año, por elección, por consultora o por indicador.

El manual del paquete se puede encontrar [__aquí__](https://github.com/Nicolas-Schmidt/Boreluy/blob/master/man/figures/Manual_opuy.pdf).




### Instalación

``` r
## Versión en desarrollo
source("https://install-github.me/Nicolas-Schmidt/opuy")
```

### Contenido del paquete

#### Conjuntos de datos

| Función |Descripción |
| ----------------- | -------------------------------------------------------------- | 
|`opuy`|....|





#### Ejemplo

```{r, eval = FALSE, message = FALSE}
library(opuy)
library(tidyverse)

data(opuy)

opuy %>%
    filter(medicion == 'Intencion de voto',
           tipo_eleccion == 'Nacional',
           eleccion == 2019,
           sigla %in% c('FA', 'PC', 'PN', 'CA')) %>%
    ggplot(aes(x = fecha, y = valor, color = empresa)) +
    geom_line(aes(group = empresa), size = 1, alpha = 0.6) +
    geom_point(size = 1.5) +
    ylim(0, 60) +
    facet_wrap(~partido, nrow = 1) +
    theme_minimal() +
    labs(x = "", y = "", title = "")
```



<img src='man/figures/iv2019.gif'/>


##### Resumen intención de voto 2019 de los principales partidos

```{r, echo = FALSE, message = FALSE}

library(magrittr)
library(dplyr)
library(Boreluy)
library(opuy)

e19  <- resultado_eleccion_uy(2019, 'Presidencial') %>%
    select(Partido, Porcentaje) 
tab <- opuy %>%
    filter(medicion == 'Intencion de voto',
           tipo_eleccion == 'Nacional',
           eleccion == 2019,
           sigla %in% c('FA', 'PC', 'PN', 'CA')) %>%
    group_by(partido) %>%
    summarise('Valor Mínimo' = min(valor),
              'Valor Máximo' = max(valor), 
              'Valor Mínimo 2019' = min(valor[anio_medicion == 2019]),
              'Valor Máximo 2019' = max(valor[anio_medicion == 2019])) %>%
    ungroup() %>%
    rename(Partido = partido) %>%
    left_join(., e19, by = 'Partido') %>% 
    arrange(-Porcentaje) %>% 
    rename('Votación real' = Porcentaje) 

tab <- cbind(tab[,1], apply(tab[, -1], 2, function(x){paste0(x, "%")}))

knitr::kable(tab)
```








```{r, echo = FALSE, message = FALSE}
manual <- function(){
    old <- here::here()
    path <- here::here('man', 'figures')
    sink('noise.txt')
    devtools::build_manual(path = path)
    sink()
    setwd(path)
    invisible(file.rename(list.files(pattern="^opuy"), 'Manual_opuy.pdf'))
    setwd(old)
    invisible(file.remove('noise.txt'))
}
manual()
```







---

##### Mantenedor
Nicolás Schmidt (<nschmidt@cienciassociales.edu.uy>)







